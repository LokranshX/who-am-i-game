{"version":3,"file":"static/js/433.b64f74df.chunk.js","mappings":"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","sources":["components/PlayerCard.js","components/Lobby.js","components/HistoryLog.js"],"sourcesContent":["// frontend/src/components/PlayerCard.js\nimport React, { memo } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheckCircle } from '@fortawesome/free-solid-svg-icons';\n\nfunction PlayerCard({ player, isSelf, isTurn }) {\n  const cardClass = `player-card ${isTurn ? 'active-turn' : ''} ${player.guessed ? 'guessed' : ''}`;\n\n  return (\n    <div className={cardClass}>\n      <div className=\"player-avatar\"></div>\n      <div className=\"player-name-container\">\n        <h3 className=\"player-name\">{player.name}</h3>\n        {player.characterSubmitted && !player.characterOnForehead && !player.guessed && (\n          <FontAwesomeIcon icon={faCheckCircle} className=\"ready-icon\" title=\"Персонаж загадан\" />\n        )}\n      </div>\n      \n      {!isSelf && player.characterOnForehead && (\n        <div className=\"character-display\">\n          <span className=\"character-name\">\n            {player.characterOnForehead}\n          </span>\n        </div>\n      )}\n\n      {player.guessed && <span className=\"guessed-badge\">Угадал!</span>}\n    </div>\n  );\n}\n\nexport default memo(PlayerCard);","// frontend/src/components/Lobby.js\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport PlayerCard from './PlayerCard';\nimport HistoryLog from './HistoryLog';\n\nfunction Lobby({ game, playerName, socketId, onStartGame, onSubmitCharacter, onLeaveGame }) {\n  const [characterInput, setCharacterInput] = useState('');\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (game && game.status === 'in-progress') {\n      navigate(`/game/${game.code}`);\n    }\n  }, [game, navigate]);\n\n  // --- ИСПРАВЛЕНИЕ ---\n  // Проверяем не только наличие game, но и его ключевых полей.\n  if (!game || !game.players || !game.actionLog) {\n    return <div className=\"loading-screen\">Синхронизация с игрой...</div>;\n  }\n\n  const isHost = game.hostId === socketId;\n  const currentPlayer = game.players.find(p => p.id === socketId);\n  const hasSubmittedCharacter = currentPlayer && currentPlayer.characterSubmitted;\n  const allPlayersSubmitted = game.players.every(p => p.characterSubmitted);\n\n  const handleCharacterSubmit = () => {\n    if (characterInput.trim()) {\n      onSubmitCharacter(characterInput.trim());\n      setCharacterInput('');\n    }\n  };\n\n  return (\n    <div className=\"glass-panel\">\n      <div className=\"room-header\">\n        <h1 className=\"room-title\">Лобби игры: {game.code}</h1>\n        <p className=\"room-info\">Вы: {playerName} {isHost && '(Хост)'}</p>\n      </div>\n      <div className=\"room-layout\">\n        <div className=\"main-content\">\n          <div className=\"players-section glass-panel\">\n            <h2>Игроки ({game.players.length})</h2>\n            <div className=\"player-list\">\n              {game.players.map((player) => (\n                <PlayerCard key={player.id} player={player} isSelf={player.id === socketId} />\n              ))}\n            </div>\n          </div>\n          <div className=\"character-submission-section glass-panel\">\n            <h2>Загадайте персонажа</h2>\n            {!hasSubmittedCharacter ? (\n              <div className=\"input-group\">\n                <input\n                  type=\"text\"\n                  value={characterInput}\n                  onChange={(e) => setCharacterInput(e.target.value)}\n                  placeholder=\"Например: Бэтмен, Гарри Поттер\"\n                  maxLength=\"30\"\n                />\n                <button onClick={handleCharacterSubmit} className=\"btn primary\">\n                  Загадать\n                </button>\n              </div>\n            ) : (\n              <p className=\"submitted-message\">Вы загадали персонажа! Ожидаем других.</p>\n            )}\n          </div>\n          {isHost && (\n            <div className=\"start-game-section\">\n              <button\n                onClick={onStartGame}\n                className=\"btn success\"\n                disabled={!allPlayersSubmitted || game.players.length < 2}\n                title={\n                  game.players.length < 2\n                  ? \"Нужно минимум 2 игрока\"\n                  : !allPlayersSubmitted\n                  ? \"Не все игроки загадали персонажа\"\n                  : \"Начать игру\"\n                }\n              >\n                Начать игру\n              </button>\n              {game.players.length < 2 && <p className=\"waiting-message\">Нужно минимум 2 игрока для начала.</p>}\n              {!allPlayersSubmitted && game.players.length >= 2 && <p className=\"waiting-message\">Ожидаем, пока все загадают персонажей...</p>}\n            </div>\n          )}\n        </div>\n        <div className=\"history-panel glass-panel\">\n          <HistoryLog events={game.actionLog} />\n        </div>\n        <div className=\"exit-button-container\">\n            <button onClick={onLeaveGame} className=\"btn danger\">Выйти из игры</button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Lobby;","// frontend/src/components/HistoryLog.js\nimport React, { useEffect, useRef } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faQuestionCircle, faCheck, faTimes, faBullseye, faSignInAlt, faSignOutAlt, faUserCheck, faGamepad } from '@fortawesome/free-solid-svg-icons';\n\nfunction HistoryLog({ events }) {\n  const eventsEndRef = useRef(null);\n\n  useEffect(() => {\n    eventsEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [events]);\n\n  const renderEvent = (event) => {\n    switch (event.type) {\n      case 'system':\n        return <><FontAwesomeIcon icon={faGamepad} /> <span>{event.text}</span></>;\n      case 'join':\n        return <><FontAwesomeIcon icon={faSignInAlt} /> <strong>{event.playerName}</strong> присоединился к игре.</>;\n      case 'leave':\n        return <><FontAwesomeIcon icon={faSignOutAlt} /> <strong>{event.playerName}</strong> покинул игру.</>;\n      case 'submit':\n        return <><FontAwesomeIcon icon={faUserCheck} /> <strong>{event.playerName}</strong> загадал персонажа.</>;\n      case 'question':\n        return <><FontAwesomeIcon icon={faQuestionCircle} /> <span><strong>{event.playerName}</strong> спросил: \"{event.text}\"</span></>;\n      case 'answer':\n        return <><FontAwesomeIcon icon={event.answer === 'Да' ? faCheck : faTimes} className={event.answer === 'Да' ? 'icon-yes' : 'icon-no'} /> <span><strong>{event.playerName}</strong> ответил: <strong>{event.answer}</strong></span></>;\n      case 'guess':\n        return <><FontAwesomeIcon icon={faBullseye} /> <span><strong>{event.playerName}</strong> угадывает: \"{event.text}\" - {event.isCorrect ? <strong className=\"correct-guess\">Верно!</strong> : 'Неверно.'}</span></>;\n      default:\n        return <span>Неизвестное действие.</span>;\n    }\n  };\n\n  return (\n    <div className=\"history-log-container\">\n      <h3>История игры</h3>\n      <div className=\"history-events\">\n        {events.map((event) => (\n          <div key={event.id} className={`history-event event-type-${event.type}`}>\n            {renderEvent(event)}\n          </div>\n        ))}\n        <div ref={eventsEndRef} />\n      </div>\n    </div>\n  );\n}\n\nexport default HistoryLog;"],"names":["PlayerCard","_ref","player","isSelf","isTurn","cardClass","concat","guessed","_jsxs","className","children","_jsx","name","characterSubmitted","characterOnForehead","FontAwesomeIcon","icon","faCheckCircle","title","memo","game","playerName","socketId","onStartGame","onSubmitCharacter","onLeaveGame","characterInput","setCharacterInput","useState","navigate","useNavigate","useEffect","status","code","players","actionLog","isHost","hostId","currentPlayer","find","p","id","hasSubmittedCharacter","allPlayersSubmitted","every","length","map","type","value","onChange","e","target","placeholder","maxLength","onClick","handleCharacterSubmit","trim","disabled","HistoryLog","events","eventsEndRef","useRef","_eventsEndRef$current","current","scrollIntoView","behavior","renderEvent","event","_Fragment","faGamepad","text","faSignInAlt","faSignOutAlt","faUserCheck","faQuestionCircle","answer","faCheck","faTimes","faBullseye","isCorrect","ref"],"sourceRoot":""}