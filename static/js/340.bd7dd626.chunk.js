"use strict";(self.webpackChunkwho_am_i_frontend=self.webpackChunkwho_am_i_frontend||[]).push([[340],{42:(e,s,n)=>{n.d(s,{A:()=>c});var a=n(43),r=n(910),i=n(929),t=n(579);function l(e){let{player:s,isSelf:n,isTurn:a}=e;const l="player-card ".concat(a?"active-turn":""," ").concat(s.guessed?"guessed":"");return(0,t.jsxs)("div",{className:l,children:[(0,t.jsx)("div",{className:"player-avatar"}),(0,t.jsxs)("div",{className:"player-name-container",children:[(0,t.jsx)("h3",{className:"player-name",children:s.name}),s.characterSubmitted&&!s.characterOnForehead&&!s.guessed&&(0,t.jsx)(r.g,{icon:i.SGM,className:"ready-icon",title:"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436 \u0437\u0430\u0433\u0430\u0434\u0430\u043d"})]}),!n&&s.characterOnForehead&&(0,t.jsx)("div",{className:"character-display",children:(0,t.jsx)("span",{className:"character-name",children:s.characterOnForehead})}),s.guessed&&(0,t.jsx)("span",{className:"guessed-badge",children:"\u0423\u0433\u0430\u0434\u0430\u043b!"})]})}const c=(0,a.memo)(l)},340:(e,s,n)=>{n.r(s),n.d(s,{default:()=>c});var a=n(43),r=n(216),i=n(42),t=n(699),l=n(579);const c=function(e){var s;let{game:n,playerName:c,socketId:d,onAskQuestion:o,onAnswerQuestion:h,onMakeGuess:u,onLeaveGame:x}=e;const[m,j]=(0,a.useState)(""),[p,g]=(0,a.useState)(""),v=(0,r.Zp)();if((0,a.useEffect)((()=>{n&&"waiting"===n.status&&v("/lobby/".concat(n.code))}),[n,v]),!n||!n.players||!n.actionLog)return(0,l.jsx)("div",{className:"loading-screen",children:"\u0421\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0430\u0446\u0438\u044f \u0441 \u0438\u0433\u0440\u043e\u0432\u043e\u0439 \u043a\u043e\u043c\u043d\u0430\u0442\u043e\u0439..."});const y=n.players[n.currentPlayerIndex],N=y&&y.id===d,f=n.players.find((e=>e.id===d)),b=null===f||void 0===f?void 0:f.guessed,k=n.actionLog.length>0?n.actionLog[n.actionLog.length-1]:null,w=k&&"question"===k.type,C=()=>{m.trim()&&N&&!b&&(o(m.trim()),j(""))},F=()=>{p.trim()&&N&&!b&&(u(p.trim()),g(""))};return(0,l.jsxs)("div",{className:"glass-panel",children:[(0,l.jsxs)("div",{className:"room-header",children:[(0,l.jsxs)("h1",{className:"room-title",children:["\u0418\u0433\u0440\u0430: ",n.code]}),(0,l.jsx)("p",{className:"room-info",children:"in-progress"===n.status?"\u0425\u043e\u0434 \u0438\u0433\u0440\u043e\u043a\u0430: ".concat(null===y||void 0===y?void 0:y.name):"\u0418\u0433\u0440\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430!"})]}),(0,l.jsxs)("div",{className:"room-layout",children:[(0,l.jsxs)("div",{className:"main-content",children:[(0,l.jsx)("div",{className:"players-display glass-panel",children:n.players.map((e=>(0,l.jsx)(i.A,{player:e,isSelf:e.id===d,isTurn:e.id===(null===y||void 0===y?void 0:y.id)},e.id)))}),(0,l.jsx)("div",{className:"action-section glass-panel",children:(()=>{if("in-progress"!==n.status)return null;if(b)return(0,l.jsx)("p",{className:"submitted-message glass-panel",style:{textAlign:"center",padding:"20px"},children:"\u0412\u044b \u0443\u0436\u0435 \u0443\u0433\u0430\u0434\u0430\u043b\u0438! \u041e\u0436\u0438\u0434\u0430\u0435\u043c \u0434\u0440\u0443\u0433\u0438\u0445."});if(N)return(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{children:"\u0412\u0430\u0448 \u0445\u043e\u0434! \u0423\u0433\u0430\u0434\u0430\u0439\u0442\u0435, \u043a\u0442\u043e \u0432\u044b."}),(0,l.jsxs)("p",{children:["\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432: ",n.maxQuestionsPerTurn-((null===f||void 0===f?void 0:f.questionsAskedInTurn)||0)]}),(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("input",{type:"text",value:m,onChange:e=>j(e.target.value),placeholder:"\u0417\u0430\u0434\u0430\u0439\u0442\u0435 \u0432\u043e\u043f\u0440\u043e\u0441 (\u0434\u0430/\u043d\u0435\u0442)",disabled:(null===f||void 0===f?void 0:f.questionsAskedInTurn)>=n.maxQuestionsPerTurn,maxLength:"100"}),(0,l.jsx)("button",{onClick:C,className:"btn primary",disabled:(null===f||void 0===f?void 0:f.questionsAskedInTurn)>=n.maxQuestionsPerTurn,children:"\u0421\u043f\u0440\u043e\u0441\u0438\u0442\u044c"})]}),(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("input",{type:"text",value:p,onChange:e=>g(e.target.value),placeholder:"\u041f\u043e\u043f\u044b\u0442\u043a\u0430 \u0443\u0433\u0430\u0434\u0430\u0442\u044c \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430",maxLength:"30"}),(0,l.jsx)("button",{onClick:F,className:"btn secondary",children:"\u0423\u0433\u0430\u0434\u0430\u0442\u044c!"})]})]});if(w){const e=n.players.find((e=>e.characterSubmitted.toLowerCase()===y.characterOnForehead.toLowerCase()));if(e&&e.id===d)return(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{children:["\u041e\u0442\u0432\u0435\u0442\u044c\u0442\u0435 \u043d\u0430 \u0432\u043e\u043f\u0440\u043e\u0441 \u043e\u0442 ",y.name,":"]}),(0,l.jsxs)("p",{children:['"',k.text,'"']}),(0,l.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[(0,l.jsx)("button",{onClick:()=>h(!0),className:"btn success",children:"\u0414\u0430"}),(0,l.jsx)("button",{onClick:()=>h(!1),className:"btn danger",children:"\u041d\u0435\u0442"})]})]})}return(0,l.jsx)("h3",{children:"\u041e\u0436\u0438\u0434\u0430\u0439\u0442\u0435 \u0441\u0432\u043e\u0435\u0433\u043e \u0445\u043e\u0434\u0430..."})})()}),"finished"===n.status&&(0,l.jsxs)("div",{className:"game-over-section glass-panel",style:{textAlign:"center"},children:[(0,l.jsx)("h2",{children:"\u0418\u0433\u0440\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430!"}),(0,l.jsxs)("p",{children:["\u041f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c: ",(null===(s=n.players.find((e=>e.guessed)))||void 0===s?void 0:s.name)||"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"]}),(0,l.jsx)("h3",{children:"\u0418\u0442\u043e\u0433\u0438:"}),(0,l.jsx)("ul",{style:{listStyle:"none",padding:0},children:n.players.map((e=>(0,l.jsxs)("li",{children:[e.name," \u0431\u044b\u043b \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0435\u043c: ",(0,l.jsx)("strong",{children:e.characterOnForehead})]},e.id)))})]})]}),(0,l.jsx)("div",{className:"history-panel glass-panel",children:(0,l.jsx)(t.A,{events:n.actionLog})}),(0,l.jsx)("div",{className:"exit-button-container",children:(0,l.jsx)("button",{onClick:x,className:"btn danger",children:"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0438\u0433\u0440\u044b"})})]})]})}},699:(e,s,n)=>{n.d(s,{A:()=>l});var a=n(43),r=n(910),i=n(929),t=n(579);const l=function(e){let{events:s}=e;const n=(0,a.useRef)(null);(0,a.useEffect)((()=>{var e;null===(e=n.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[s]);const l=e=>{switch(e.type){case"system":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.g,{icon:i.Rbk})," ",(0,t.jsx)("span",{children:e.text})]});case"join":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.g,{icon:i.rhE})," ",(0,t.jsx)("strong",{children:e.playerName})," \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u043b\u0441\u044f \u043a \u0438\u0433\u0440\u0435."]});case"leave":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.g,{icon:i.GxD})," ",(0,t.jsx)("strong",{children:e.playerName})," \u043f\u043e\u043a\u0438\u043d\u0443\u043b \u0438\u0433\u0440\u0443."]});case"submit":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.g,{icon:i.pCJ})," ",(0,t.jsx)("strong",{children:e.playerName})," \u0437\u0430\u0433\u0430\u0434\u0430\u043b \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430."]});case"question":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.g,{icon:i.wRm})," ",(0,t.jsxs)("span",{children:[(0,t.jsx)("strong",{children:e.playerName}),' \u0441\u043f\u0440\u043e\u0441\u0438\u043b: "',e.text,'"']})]});case"answer":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.g,{icon:"\u0414\u0430"===e.answer?i.e68:i.GRI,className:"\u0414\u0430"===e.answer?"icon-yes":"icon-no"})," ",(0,t.jsxs)("span",{children:[(0,t.jsx)("strong",{children:e.playerName})," \u043e\u0442\u0432\u0435\u0442\u0438\u043b: ",(0,t.jsx)("strong",{children:e.answer})]})]});case"guess":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.g,{icon:i.pvD})," ",(0,t.jsxs)("span",{children:[(0,t.jsx)("strong",{children:e.playerName}),' \u0443\u0433\u0430\u0434\u044b\u0432\u0430\u0435\u0442: "',e.text,'" - ',e.isCorrect?(0,t.jsx)("strong",{className:"correct-guess",children:"\u0412\u0435\u0440\u043d\u043e!"}):"\u041d\u0435\u0432\u0435\u0440\u043d\u043e."]})]});default:return(0,t.jsx)("span",{children:"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435."})}};return(0,t.jsxs)("div",{className:"history-log-container",children:[(0,t.jsx)("h3",{children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0438\u0433\u0440\u044b"}),(0,t.jsxs)("div",{className:"history-events",children:[s.map((e=>(0,t.jsx)("div",{className:"history-event event-type-".concat(e.type),children:l(e)},e.id))),(0,t.jsx)("div",{ref:n})]})]})}}}]);
//# sourceMappingURL=340.bd7dd626.chunk.js.map